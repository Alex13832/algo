///
/// \brief Unit tests for image object algorithms.
/// \author alex011235
/// \date 2020-06-29
/// \link <a href=https://github.com/alex011235/algo>Algo, Github</a>
///

#include <algorithm>
#include <cstdint>
#include <vector>

#include "gtest/gtest.h"
#include "include/algo_image_basic.hpp"
#include "include/algo_image_object.hpp"

namespace {
namespace img = algo::image;
namespace imgo = algo::image::object;

img::Img GetTestImage() {
  const std::vector<uint8_t> data{
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 91, 92, 91, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 92, 91,
      91, 91, 92, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 89, 89, 90, 89, 90, 90, 90, 90, 90, 90,
      90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 89, 90, 89, 90, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 92, 49, 21, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 32,
      32, 32, 32, 32, 32, 32, 32, 32, 32, 32, 31, 32, 14, 66, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92,
      37, 0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
      0,  0,  0,  0,  60, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  40, 65, 62, 63, 63, 63, 63,
      63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 63, 62, 26, 0,  63, 94, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  59, 98, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94,
      94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 93, 36, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 42, 0,  56, 93, 89, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      90, 91, 89, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62,
      94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94,
      90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,
      62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57,
      94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35,
      0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,
      57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90,
      35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42,
      0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92,
      90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92,
      42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62,
      94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94,
      90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,
      62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57,
      94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35,
      0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,
      57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90,
      35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42,
      0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92,
      90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92,
      42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      92, 42, 0,  57, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 92, 90, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  57, 94, 90, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 90, 35, 0,  62, 94, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  56, 93, 89, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 90, 91, 89, 35, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 92, 42, 0,  58, 97, 93, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94,
      94, 94, 94, 92, 36, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 42, 0,  48, 80, 77, 78, 78,
      78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 78, 76, 31, 0,  62, 94, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 92, 39, 0,  1,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
      0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  11, 0,  62, 94, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 92, 39, 0,  2,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,  1,
      1,  1,  1,  1,  1,  2,  0,  61, 94, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 83, 81, 82, 82, 82, 82,
      82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 82, 81, 86, 92,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 93, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94,
      94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 94, 92, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 90, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91,
      91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91, 91};

  return img::Img{data, img::Size{75, 47}};
}
}  // namespace

/////////////////////////////////////////////
/// Canny edge detect
/////////////////////////////////////////////

TEST(tEstAlgoImage, TestCannyEdge) {
  img::Img test_im{GetTestImage()};
  img::Img canny_img{imgo::ExtractCannyEdges(test_im)};
  EXPECT_FALSE(equal(test_im.data.begin(), test_im.data.end(), canny_img.data.begin()));

  int nbr_blacks{0};
  for (const auto& dat : canny_img.data) {
    nbr_blacks = dat == 0 ? nbr_blacks + 1 : nbr_blacks;
  }
  const float ratio_blacks = static_cast<float>(nbr_blacks) / static_cast<float>(canny_img.data.size());
  EXPECT_GT(ratio_blacks, 0.9);
}

/////////////////////////////////////////////
/// Line detect
/////////////////////////////////////////////

TEST(TestAlgoImage, TestLineDetection) {
  const img::Img test_im{GetTestImage()};
  const img::Lines lines{imgo::ExtractLines(test_im, 4, 10)};
  EXPECT_FALSE(lines.empty());
}
